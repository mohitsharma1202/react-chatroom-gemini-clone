{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\DELL\\\\Downloads\\\\gemini-clone\\\\src\\\\components\\\\ChatRoom.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport { useChatStore } from '../store/useChatStore';\nimport { toast } from 'react-toastify';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ChatRoom = ({\n  chatroomId,\n  onBack\n}) => {\n  _s();\n  var _messages$chatroomId;\n  const {\n    messages,\n    addMessage\n  } = useChatStore();\n  const [input, setInput] = useState('');\n  const chatEndRef = useRef(null);\n  const sendMessage = () => {\n    if (!input.trim()) return;\n    const newMessage = {\n      text: input,\n      sender: 'user',\n      time: new Date().toLocaleTimeString()\n    };\n    addMessage(chatroomId, newMessage);\n    setInput('');\n    toast.success('Message sent!');\n\n    // Fake AI typing & response\n    setTimeout(() => {\n      addMessage(chatroomId, {\n        text: 'This is a simulated AI reply.',\n        sender: 'ai',\n        time: new Date().toLocaleTimeString()\n      });\n      toast.info('Gemini replied!');\n    }, 1500);\n  };\n  const handleImageUpload = e => {\n    const file = e.target.files[0];\n    if (!file) return;\n    const reader = new FileReader();\n    reader.onload = () => {\n      addMessage(chatroomId, {\n        text: reader.result,\n        sender: 'user',\n        isImage: true,\n        time: new Date().toLocaleTimeString()\n      });\n      toast.success('Image sent!');\n    };\n    reader.readAsDataURL(file);\n  };\n  const copyToClipboard = text => {\n    navigator.clipboard.writeText(text);\n    toast.success('Copied to clipboard!');\n  };\n  useEffect(() => {\n    var _chatEndRef$current;\n    (_chatEndRef$current = chatEndRef.current) === null || _chatEndRef$current === void 0 ? void 0 : _chatEndRef$current.scrollIntoView({\n      behavior: 'smooth'\n    });\n  }, [messages[chatroomId]]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-4 max-w-2xl mx-auto\",\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: onBack,\n      className: \"mb-4 bg-gray-400 text-white px-3 py-1 rounded\",\n      children: \"Back\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"border h-96 overflow-y-auto p-2 rounded mb-4 bg-white\",\n      children: [(_messages$chatroomId = messages[chatroomId]) === null || _messages$chatroomId === void 0 ? void 0 : _messages$chatroomId.map((msg, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `p-2 mb-1 rounded ${msg.sender === 'user' ? 'bg-blue-200' : 'bg-green-200'}`,\n        onClick: () => !msg.isImage && copyToClipboard(msg.text),\n        children: [msg.isImage ? /*#__PURE__*/_jsxDEV(\"img\", {\n          src: msg.text,\n          alt: \"Uploaded\",\n          className: \"max-w-xs rounded\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n          children: msg.text\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-xs text-right\",\n          children: msg.time\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 13\n        }, this)]\n      }, idx, true, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 11\n      }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: chatEndRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      value: input,\n      onChange: e => setInput(e.target.value),\n      className: \"border p-2 rounded w-3/4 mr-2\",\n      placeholder: \"Type your message...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      accept: \"image/*\",\n      onChange: handleImageUpload,\n      className: \"inline-block\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: sendMessage,\n      className: \"bg-blue-600 text-white p-2 rounded ml-2\",\n      children: \"Send\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 5\n  }, this);\n};\n_s(ChatRoom, \"g3ho9ZoeGdC5q0kKnfKyrriuAqY=\", false, function () {\n  return [useChatStore];\n});\n_c = ChatRoom;\nexport default ChatRoom;\nvar _c;\n$RefreshReg$(_c, \"ChatRoom\");","map":{"version":3,"names":["React","useEffect","useRef","useState","useChatStore","toast","jsxDEV","_jsxDEV","ChatRoom","chatroomId","onBack","_s","_messages$chatroomId","messages","addMessage","input","setInput","chatEndRef","sendMessage","trim","newMessage","text","sender","time","Date","toLocaleTimeString","success","setTimeout","info","handleImageUpload","e","file","target","files","reader","FileReader","onload","result","isImage","readAsDataURL","copyToClipboard","navigator","clipboard","writeText","_chatEndRef$current","current","scrollIntoView","behavior","className","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","map","msg","idx","src","alt","ref","type","value","onChange","placeholder","accept","_c","$RefreshReg$"],"sources":["C:/Users/DELL/Downloads/gemini-clone/src/components/ChatRoom.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\nimport { useChatStore } from '../store/useChatStore';\r\nimport { toast } from 'react-toastify';\r\n\r\nconst ChatRoom = ({ chatroomId, onBack }) => {\r\n  const { messages, addMessage } = useChatStore();\r\n  const [input, setInput] = useState('');\r\n  const chatEndRef = useRef(null);\r\n\r\n  const sendMessage = () => {\r\n    if (!input.trim()) return;\r\n    const newMessage = { text: input, sender: 'user', time: new Date().toLocaleTimeString() };\r\n    addMessage(chatroomId, newMessage);\r\n    setInput('');\r\n    toast.success('Message sent!');\r\n\r\n    // Fake AI typing & response\r\n    setTimeout(() => {\r\n      addMessage(chatroomId, {\r\n        text: 'This is a simulated AI reply.',\r\n        sender: 'ai',\r\n        time: new Date().toLocaleTimeString()\r\n      });\r\n      toast.info('Gemini replied!');\r\n    }, 1500);\r\n  };\r\n\r\n  const handleImageUpload = (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file) return;\r\n    const reader = new FileReader();\r\n    reader.onload = () => {\r\n      addMessage(chatroomId, { text: reader.result, sender: 'user', isImage: true, time: new Date().toLocaleTimeString() });\r\n      toast.success('Image sent!');\r\n    };\r\n    reader.readAsDataURL(file);\r\n  };\r\n\r\n  const copyToClipboard = (text) => {\r\n    navigator.clipboard.writeText(text);\r\n    toast.success('Copied to clipboard!');\r\n  };\r\n\r\n  useEffect(() => {\r\n    chatEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  }, [messages[chatroomId]]);\r\n\r\n  return (\r\n    <div className=\"p-4 max-w-2xl mx-auto\">\r\n      <button onClick={onBack} className=\"mb-4 bg-gray-400 text-white px-3 py-1 rounded\">Back</button>\r\n\r\n      <div className=\"border h-96 overflow-y-auto p-2 rounded mb-4 bg-white\">\r\n        {messages[chatroomId]?.map((msg, idx) => (\r\n          <div\r\n            key={idx}\r\n            className={`p-2 mb-1 rounded ${msg.sender === 'user' ? 'bg-blue-200' : 'bg-green-200'}`}\r\n            onClick={() => !msg.isImage && copyToClipboard(msg.text)}\r\n          >\r\n            {msg.isImage ? (\r\n              <img src={msg.text} alt=\"Uploaded\" className=\"max-w-xs rounded\" />\r\n            ) : (\r\n              <span>{msg.text}</span>\r\n            )}\r\n            <div className=\"text-xs text-right\">{msg.time}</div>\r\n          </div>\r\n        ))}\r\n        <div ref={chatEndRef}></div>\r\n      </div>\r\n\r\n      <input\r\n        type=\"text\"\r\n        value={input}\r\n        onChange={(e) => setInput(e.target.value)}\r\n        className=\"border p-2 rounded w-3/4 mr-2\"\r\n        placeholder=\"Type your message...\"\r\n      />\r\n      <input type=\"file\" accept=\"image/*\" onChange={handleImageUpload} className=\"inline-block\" />\r\n      <button onClick={sendMessage} className=\"bg-blue-600 text-white p-2 rounded ml-2\">Send</button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatRoom;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}