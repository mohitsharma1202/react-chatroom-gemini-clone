{"ast":null,"code":"import React,{useEffect,useRef,useState}from'react';import{useChatStore}from'../store/useChatStore';import{toast}from'react-toastify';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ChatRoom=_ref=>{var _messages$chatroomId;let{chatroomId,onBack}=_ref;const{messages,addMessage}=useChatStore();const[input,setInput]=useState('');const chatEndRef=useRef(null);const sendMessage=()=>{if(!input.trim())return;const newMessage={text:input,sender:'user',time:new Date().toLocaleTimeString()};addMessage(chatroomId,newMessage);setInput('');toast.success('Message sent!');setTimeout(()=>{addMessage(chatroomId,{text:'This is a simulated AI reply.',sender:'ai',time:new Date().toLocaleTimeString()});toast.info('Gemini replied!');},1200);};const handleImageUpload=e=>{const file=e.target.files[0];if(!file)return;const reader=new FileReader();reader.onload=()=>{addMessage(chatroomId,{text:reader.result,sender:'user',isImage:true,time:new Date().toLocaleTimeString()});toast.success('Image sent!');};reader.readAsDataURL(file);};const copyToClipboard=text=>{navigator.clipboard.writeText(text);toast.success('Copied to clipboard!');};useEffect(()=>{var _chatEndRef$current;(_chatEndRef$current=chatEndRef.current)===null||_chatEndRef$current===void 0?void 0:_chatEndRef$current.scrollIntoView({behavior:'smooth'});},[messages[chatroomId]]);return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 max-w-2xl mx-auto bg-white/10 backdrop-blur-lg rounded-2xl shadow-xl\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:onBack,className:\"mb-4 bg-gray-500 text-white px-4 py-2 rounded hover:scale-105 transition\",children:\"\\u2B05\\uFE0F Back\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"border border-gray-600 h-96 overflow-y-auto p-3 rounded-lg bg-black/20 space-y-3 mb-4\",children:[(_messages$chatroomId=messages[chatroomId])===null||_messages$chatroomId===void 0?void 0:_messages$chatroomId.map((msg,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:`p-3 rounded-xl shadow-md transition-all duration-300 cursor-pointer hover:scale-[1.01] ${msg.sender==='user'?'bg-blue-500 text-white self-end':'bg-green-500 text-white'}`,onClick:()=>!msg.isImage&&copyToClipboard(msg.text),children:[msg.isImage?/*#__PURE__*/_jsx(\"img\",{src:msg.text,alt:\"Uploaded\",className:\"max-w-xs rounded-xl hover:scale-105 transition\"}):/*#__PURE__*/_jsx(\"span\",{children:msg.text}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs mt-1 text-right\",children:msg.time})]},idx)),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm italic animate-pulse text-gray-300 mt-2\",children:\"Gemini is typing...\"}),/*#__PURE__*/_jsx(\"div\",{ref:chatEndRef})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:input,onChange:e=>setInput(e.target.value),placeholder:\"Type your message...\",className:\"border border-gray-600 p-3 rounded-xl flex-1 bg-transparent text-white\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handleImageUpload,className:\"block text-sm text-gray-300\"}),/*#__PURE__*/_jsx(\"button\",{onClick:sendMessage,className:\"bg-blue-600 text-white px-4 py-2 rounded hover:scale-105 transition\",children:\"\\uD83D\\uDCE4\"})]})]});};export default ChatRoom;","map":{"version":3,"names":["React","useEffect","useRef","useState","useChatStore","toast","jsx","_jsx","jsxs","_jsxs","ChatRoom","_ref","_messages$chatroomId","chatroomId","onBack","messages","addMessage","input","setInput","chatEndRef","sendMessage","trim","newMessage","text","sender","time","Date","toLocaleTimeString","success","setTimeout","info","handleImageUpload","e","file","target","files","reader","FileReader","onload","result","isImage","readAsDataURL","copyToClipboard","navigator","clipboard","writeText","_chatEndRef$current","current","scrollIntoView","behavior","className","children","onClick","map","msg","idx","src","alt","ref","type","value","onChange","placeholder","accept"],"sources":["C:/Users/DELL/Downloads/gemini-clone/src/components/ChatRoom.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\nimport { useChatStore } from '../store/useChatStore';\r\nimport { toast } from 'react-toastify';\r\n\r\nconst ChatRoom = ({ chatroomId, onBack }) => {\r\n  const { messages, addMessage } = useChatStore();\r\n  const [input, setInput] = useState('');\r\n  const chatEndRef = useRef(null);\r\n\r\n  const sendMessage = () => {\r\n    if (!input.trim()) return;\r\n    const newMessage = { text: input, sender: 'user', time: new Date().toLocaleTimeString() };\r\n    addMessage(chatroomId, newMessage);\r\n    setInput('');\r\n    toast.success('Message sent!');\r\n\r\n    setTimeout(() => {\r\n      addMessage(chatroomId, {\r\n        text: 'This is a simulated AI reply.',\r\n        sender: 'ai',\r\n        time: new Date().toLocaleTimeString()\r\n      });\r\n      toast.info('Gemini replied!');\r\n    }, 1200);\r\n  };\r\n\r\n  const handleImageUpload = (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file) return;\r\n    const reader = new FileReader();\r\n    reader.onload = () => {\r\n      addMessage(chatroomId, { text: reader.result, sender: 'user', isImage: true, time: new Date().toLocaleTimeString() });\r\n      toast.success('Image sent!');\r\n    };\r\n    reader.readAsDataURL(file);\r\n  };\r\n\r\n  const copyToClipboard = (text) => {\r\n    navigator.clipboard.writeText(text);\r\n    toast.success('Copied to clipboard!');\r\n  };\r\n\r\n  useEffect(() => {\r\n    chatEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  }, [messages[chatroomId]]);\r\n\r\n  return (\r\n    <div className=\"p-6 max-w-2xl mx-auto bg-white/10 backdrop-blur-lg rounded-2xl shadow-xl\">\r\n      <button onClick={onBack} className=\"mb-4 bg-gray-500 text-white px-4 py-2 rounded hover:scale-105 transition\">‚¨ÖÔ∏è Back</button>\r\n\r\n      <div className=\"border border-gray-600 h-96 overflow-y-auto p-3 rounded-lg bg-black/20 space-y-3 mb-4\">\r\n        {messages[chatroomId]?.map((msg, idx) => (\r\n          <div\r\n            key={idx}\r\n            className={`p-3 rounded-xl shadow-md transition-all duration-300 cursor-pointer hover:scale-[1.01] ${\r\n              msg.sender === 'user' ? 'bg-blue-500 text-white self-end' : 'bg-green-500 text-white'\r\n            }`}\r\n            onClick={() => !msg.isImage && copyToClipboard(msg.text)}\r\n          >\r\n            {msg.isImage ? (\r\n              <img src={msg.text} alt=\"Uploaded\" className=\"max-w-xs rounded-xl hover:scale-105 transition\" />\r\n            ) : (\r\n              <span>{msg.text}</span>\r\n            )}\r\n            <div className=\"text-xs mt-1 text-right\">{msg.time}</div>\r\n          </div>\r\n        ))}\r\n        <div className=\"text-sm italic animate-pulse text-gray-300 mt-2\">Gemini is typing...</div>\r\n        <div ref={chatEndRef}></div>\r\n      </div>\r\n\r\n      <div className=\"flex gap-2\">\r\n        <input\r\n          type=\"text\"\r\n          value={input}\r\n          onChange={(e) => setInput(e.target.value)}\r\n          placeholder=\"Type your message...\"\r\n          className=\"border border-gray-600 p-3 rounded-xl flex-1 bg-transparent text-white\"\r\n        />\r\n        <input type=\"file\" accept=\"image/*\" onChange={handleImageUpload} className=\"block text-sm text-gray-300\" />\r\n        <button onClick={sendMessage} className=\"bg-blue-600 text-white px-4 py-2 rounded hover:scale-105 transition\">\r\n          üì§\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatRoom;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}